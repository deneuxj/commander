(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;$.Define($$,{Commander:{WebCommander:{FireControl:$.Class({},{Show:function(v){return v.$==1?"return fire only":v.$==2?"hold fire":"free fire";}}),Login:function(){var w,x,y,z;w=c.Create("AAA1234");x=c.Create("Please enter the pin code provided to you in the game chat");z=d.ofArray([e.TextNode("Your password: "),e.Input($.New(f,{$:0}),w),e.Button("Log in",$.New(f,{$:0}),function(){return g.Start(g.Delay(function(){return g.Bind(i.Async("Commander:2",[j.Get(w)]),function(C){if(C.$==0){j.Set(x,"Incorrect pin code");return g.Return(null);}else{j.Set(x,"Welcome "+k.toSafe(C.$0));return g.Return(null);}});}),{$:0});})]);y=d.ofArray([e.Element("div",[],z),e.TextView(x.get_View())]);return e.Element("div",[],y);},Order:$.Class({},{Show:function(D){var E,F;if(D.$==1){E="Continue";}else{if(D.$==2){E="Form off-road column";}else{if(D.$==3){E="Form on-road column";}else{if(D.$==4){E="Attack formation";}else{if(D.$==5){E="Fire a green flare";}else{if(D.$==6){E="Fire a red flare";}else{if(D.$==7){F=D.$0;E=F;}else{E="Stop";}}}}}}}return E;}}),OrderAndPolicy:$.Class({ToServerInput:function(G,H){var I,J,K,L,M,N,O,P,Q,R;if(this.$0.$==1){I="Order_"+k.toSafe(G)+"_Continue";}else{if(this.$0.$==2){I="Order_"+k.toSafe(G)+"_Column";}else{if(this.$0.$==3){I="Order_"+k.toSafe(G)+"_OnRoad";}else{if(this.$0.$==4){I="Order_"+k.toSafe(G)+"_Attack";}else{if(this.$0.$==5){I="Order_"+k.toSafe(G)+"_GreenFlare";}else{if(this.$0.$==6){I="Order_"+k.toSafe(G)+"_RedFlare";}else{if(this.$0.$==7){if(this.$1.$==0){K=this.$0.$0;J=$.New(n,{$:0,$0:$.New(o,{$:7,$0:K}),$1:{$:1,$0:{Speed:$.New(p,{$:1}),FireControl:$.New(q,{$:1})}}}).ToServerInput(G,H);}else{L=this.$0.$0;M=this.$1.$0;N=M.FireControl;O=N.$==1?"R":N.$==2?"H":"F";P=M.Speed;Q=P.$==1?"N":P.$==2?"F":"S";R=H(L);J=k.toSafe(O)+k.toSafe(Q)+"_"+k.toSafe(G)+"_"+k.toSafe(R);}I=J;}else{I="Order_"+k.toSafe(G)+"_Stop";}}}}}}}return I;}}),ShowPlayers:function(S){var T;T=r.toList(r.delay(function(){var V,W,X,Y;W=d.ofArray([e.TextNode("Client ID")]);X=d.ofArray([e.TextNode("Status")]);Y=d.ofArray([e.TextNode("Name")]);V=d.ofArray([e.Element("td",[],W),e.Element("td",[],X),e.Element("td",[],Y)]);return r.append([e.Element("tr",[],V)],r.delay(function(){return r.map(function(_0){var _1,_2,_3,_4,_5,_6,_7;_3=k.padNumLeft($$.String(_0.ClientId),2);_2=d.ofArray([e.TextNode(_3)]);_5=$$.String(_0.Status);_4=d.ofArray([e.TextNode(_5)]);_7=k.toSafe(_0.Name);_6=d.ofArray([e.TextNode(_7)]);_1=d.ofArray([e.Element("td",[],_2),e.Element("td",[],_4),e.Element("td",[],_6)]);return e.Element("tr",[],_1);},S);}));}));return e.Element("table",[],T);},ShowResult:function(_8){var _9,bc,bd;_9=function(_){var ba,bb;ba=_[0];bb=_[1];return"Key: "+k.toSafe(ba)+" Value: "+k.toSafe(bb);};bc=d.map(_9,_8);bd=d.map(function(be){return e.TextNode(be);},bc);return e.Element("div",[],bd);},Speed:$.Class({},{Show:function(be){return be.$==1?"normal speed":be.$==2?"maximum speed":"slow speed";}}),TakeOrders:function(bf,bg){var bh,bk,bl,bq,br,bs,bu,bw,by,bz,bA,bB,bC,bD,b0,b1;bh=function(bi){return function(bj){return[bj,bi];};};bk=d.mapi(bh,bf);bl=function(bm){return function(bn){var bo,bp;bo=bn[0];bp=bn[1];return bm.Add(bo,bp);};};bq=t.New1([]);br=r.fold(bl,bq,bk);bs=function(bt){return"WP"+$$.String(br.get_Item(bt));};bu=function(bv){return bv==="North"?[0,{$:0}]:bv==="North-East"?[1,{$:0}]:bv==="East"?[2,{$:0}]:bv==="South-East"?[3,{$:0}]:bv==="South"?[4,{$:0}]:bv==="South-West"?[5,{$:0}]:bv==="West"?[6,{$:0}]:bv==="North-West"?[7,{$:0}]:[8,{$:1,$0:bv}];};bw=function(bx){return $.New(o,{$:7,$0:bx});};by=d.sortBy(bu,bf);bz=d.map(bw,by);bA=d.ofArray([$.New(o,{$:3}),$.New(o,{$:2}),$.New(o,{$:4}),$.New(o,{$:5}),$.New(o,{$:6})]);bB=d.ofArray([$.New(p,{$:0}),$.New(p,{$:2})]);bC=d.ofArray([$.New(q,{$:0}),$.New(q,{$:1})]);bD=function(bE){var bF,bG,bH,bI,bJ,bK,bN,bT,bW,bY;bF=c.Create(d.head(bA));bG=c.Create(d.head(bz));bH=c.Create(d.head(bB));bI=c.Create(d.head(bC));bJ=c.Create(r.nth(bE,bg));bN=function(){var bP;bP=$.New(n,{$:0,$0:j.Get(bF),$1:{$:0}});return i.Send("Commander:0",[bP.ToServerInput(j.Get(bJ),bs)]);};bT=function(){var bV;bV=$.New(n,{$:0,$0:j.Get(bG),$1:{$:1,$0:{Speed:j.Get(bH),FireControl:j.Get(bI)}}});return i.Send("Commander:0",[bV.ToServerInput(j.Get(bJ),bs)]);};bW=function(){return i.Send("Commander:0",[$.New(n,{$:0,$0:$.New(o,{$:0}),$1:{$:0}}).ToServerInput(j.Get(bJ),bs)]);};bY=function(){return i.Send("Commander:0",[$.New(n,{$:0,$0:$.New(o,{$:1}),$1:{$:0}}).ToServerInput(j.Get(bJ),bs)]);};bK=d.ofArray([e.Select($.New(f,{$:0}),function(bL){return bL;},bg,bJ),e.Select($.New(f,{$:0}),function(bM){return o.Show(bM);},bA,bF),e.Button("Order",$.New(f,{$:0}),bN),e.TextNode(" - "),e.TextNode("Move towards..."),e.Select($.New(f,{$:0}),function(bQ){return o.Show(bQ);},bz,bG),e.TextNode(" at "),e.Select($.New(f,{$:0}),function(bR){return p.Show(bR);},bB,bH),e.TextNode(", "),e.Select($.New(f,{$:0}),function(bS){return q.Show(bS);},bC,bI),e.Button("Move",$.New(f,{$:0}),bT),e.TextNode(" - "),e.Button("Stop",$.New(f,{$:0}),bW),e.TextNode(" "),e.Button("Continue",$.New(f,{$:0}),bY)]);return e.Element("div",[],bK);};b0=u.Min(r.length(bg),6);b1=r.toList(r.delay(function(){return r.map(function(b3){return bD(b3);},u.range(0,b0-1));}));return e.Element("div",[],b1);}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.UI);b=$.Safe(a.Next);c=$.Safe(b.Var);d=$.Safe($$.WebSharper.List);e=$.Safe(b.Doc);f=$.Safe(d.T);g=$.Safe($$.WebSharper.Concurrency);h=$.Safe($$.WebSharper.Remoting);i=$.Safe(h.AjaxRemotingProvider);j=$.Safe(b.Var1);k=$.Safe($$.WebSharper.PrintfHelpers);l=$.Safe($$.Commander);m=$.Safe(l.WebCommander);n=$.Safe(m.OrderAndPolicy);o=$.Safe(m.Order);p=$.Safe(m.Speed);q=$.Safe(m.FireControl);r=$.Safe($$.WebSharper.Seq);s=$.Safe($$.WebSharper.Collections);t=$.Safe(s.FSharpMap);return u=$.Safe($$.WebSharper.Operators);});$.OnLoad(function(){return;});}());
